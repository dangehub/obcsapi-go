---
title: 7. 前端说明
---

本项目的前端页面，总共有5个主要页面。主页，表单，编辑器，指令模式，设置。

1. 主页为 Memos 列表和输入框。
2. 自定义表单提交。使用 JsonSchema 描述表单，Lua 处理数据。
3. 编辑器页面为 4.2.3 实验性质页面，需要在配置中声明开启，可以从文件列表或者日历中选择文件进行编辑。该页面可使用 url 进入，如`https://kkbt.gitee.io/web/?page=edit&fileKey=xxx.md` 这样，就可以点击进入就编辑 xxx.md 文件了。
4. 对话模式页面，可自定义返回内容。详细见功能说明-指令模式文档。
5. 设置页面，分为本地设置，服务器设置，提示词（标签，JsonSchema 可选项）设置

可以使用  
https://1.xrender.fun/generator  
https://form.lljj.me/v3/#/demo?type=Simple&ui=VueNaiveForm  
来生成或检验 JsonSchema  
也可以在搜索引擎中找到更多可以拖拽组件生成表单的工具，导出 Jsonscheme 然后保存到 设置-Mention-表单可选列表 即可在表单页面选择使用表单。数据处理使用 scripts/form.lua 进行处理，可以修改规则实现更多操作。

举例来说

```json
{
  "type": "object",
  "displayType": "row",
  "properties": {
    "记录": {
      "title": "写下生活感悟吧！",
      "type": "string",
      "ui:options": {
        "type":"textarea"
      }
    },
    "type": {
      "title": "类型",
      "type": "string",
      "enum": ["类型1"],
      "default": "类型1"
    }
  }
}
```

在表单列表中添加后，即可在表单页面中选择使用此表单。具体来说，有一个多行文本输入框和一个选择器，默认保存到日志中。可以根据需要编写脚本处理。

已知编辑器 bug ，由于使用开源组件，暂时未计划魔改适配。可能会直接换个开源 markdown 编辑器

1. 分割线，列表显示星号，而不是短横线。开源组件会把短横线替换为星号，目前前端又给替换回来了。
2. 文件格式，如缩进之类的出现变化。原因是开源组件编辑 markdown 会转换格式，再导出后会有变化。
3. 图片链接中文被编码，导致的显示问题。

编辑器页面，可以点击下面的 Cal ，FileList ，Edit: xxx.md 开启关闭相应的菜单。

由于服务器会缓存一周前的日志，所以如果在 Obsidian 中修改后，可能会出现使用的缓存错误，修改文件 400 错误。想要刷新缓存，可以在编辑器页面找到对应文件，打开后即可。或者在设置界面处刷新指定的文件。