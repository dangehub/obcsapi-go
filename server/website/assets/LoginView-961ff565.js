import{d as i,r as v,b as m,o as w,c,e as a,w as n,u as t,F as f,R as g,O as h,N as u,f as r,g as k,h as N,i as b,j as I,k as x}from"./index-a0b90ed0.js";const _=i({__name:"LoginView",setup(S){const e=v({host:"http://localhost:8900",username:"",password:""}),d=I();m(()=>{e.value.host=localStorage.getItem("host")||window.location.protocol+"//"+window.location.host});function p(){localStorage.setItem("host",e.value.host),g(),h(e.value.username,e.value.password).then(s=>{localStorage.setItem("token",s.token),window.$message.success("登录成功"),d.push("/")}).catch(s=>{window.$message.error("登录失败"+s),console.log(s)})}return(s,o)=>(w(),c(f,null,[a(t(r),{label:"服务器"},{default:n(()=>[a(t(u),{value:e.value.host,"onUpdate:value":o[0]||(o[0]=l=>e.value.host=l),placeholder:"服务器"},null,8,["value"])]),_:1}),a(t(r),{label:"用户名"},{default:n(()=>[a(t(u),{value:e.value.username,"onUpdate:value":o[1]||(o[1]=l=>e.value.username=l),placeholder:"用户名"},null,8,["value"])]),_:1}),a(t(r),{label:"密码"},{default:n(()=>[a(t(u),{value:e.value.password,"onUpdate:value":o[2]||(o[2]=l=>e.value.password=l),type:"password",onKeydown:o[3]||(o[3]=k(x(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),a(t(b),{onClick:p},{default:n(()=>[N("登录")]),_:1})],64))}});export{_ as default};
