import{d as v,r as m,b as i,o as w,c as f,e as t,w as u,u as o,F as h,R as c,O as g,N as n,f as r,g as k,h as N,i as b,j as I,k as x}from"./index-2f20cc4b.js";const _=v({__name:"LoginView",setup(S){const e=m({host:"http://localhost:8900",username:"",password:""}),d=I();i(()=>{e.value.host=localStorage.getItem("host")||"http://localhost:8900"});function p(){localStorage.setItem("host",e.value.host),c(),g(e.value.username,e.value.password).then(s=>{localStorage.setItem("token",s.token),window.$message.success("登录成功"),d.push("/")}).catch(s=>{window.$message.error("登录失败"+s),console.log(s)})}return(s,a)=>(w(),f(h,null,[t(o(r),{label:"服务器"},{default:u(()=>[t(o(n),{value:e.value.host,"onUpdate:value":a[0]||(a[0]=l=>e.value.host=l),placeholder:"服务器"},null,8,["value"])]),_:1}),t(o(r),{label:"用户名"},{default:u(()=>[t(o(n),{value:e.value.username,"onUpdate:value":a[1]||(a[1]=l=>e.value.username=l),placeholder:"用户名"},null,8,["value"])]),_:1}),t(o(r),{label:"密码"},{default:u(()=>[t(o(n),{value:e.value.password,"onUpdate:value":a[2]||(a[2]=l=>e.value.password=l),type:"password",onKeydown:a[3]||(a[3]=k(x(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),t(o(b),{onClick:p},{default:u(()=>[N("登录")]),_:1})],64))}});export{_ as default};
