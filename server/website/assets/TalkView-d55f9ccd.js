import{a_ as p,r,d as k,o as t,c as a,a as u,e as c,u as o,w as v,a$ as w,aY as T,b0 as y,h as x,i as H,F as b,b1 as M,aT as L}from"./index-a4fd7e29.js";const N=p("talk",()=>({messages:r([])})),B=u("div",null,"Talk",-1),R={class:"chat-input"},S=["innerHTML"],V=["innerHTML"],C=k({__name:"TalkView",setup(g){const i=N().messages,e=r(""),d=r(null),_=r(null);function f(){if(e.value==""){window.$message.warning("Empty");return}i.push("I: "+e.value),w(e.value).then(s=>{i.push("O: "+s),h()}).catch(s=>{console.log(s),window.$message.warning("Err Save: "+s)}),e.value=""}const h=()=>{const l=_.value.clientHeight-window.innerHeight*.75;d.value.scrollTo(0,l)};return(s,l)=>(t(),a("div",null,[B,u("div",R,[c(o(y),{type:"textarea",autosize:{minRows:2},options:o(T)().mention,value:e.value,"onUpdate:value":l[0]||(l[0]=n=>e.value=n),placeholder:":~$",prefix:["#"]},null,8,["options","value"]),c(o(H),{onClick:f},{default:v(()=>[x("输入")]),_:1})]),c(o(L),{style:{"max-height":"75vh"},ref_key:"scrollbarRef",ref:d},{default:v(()=>[u("div",{class:"chat-messages",ref_key:"contentRef",ref:_},[(t(!0),a(b,null,M(o(i).slice().reverse(),(n,m)=>(t(),a("div",{key:m},[n.substring(0,2)=="I:"?(t(),a("div",{key:0,class:"message1",innerHTML:n},null,8,S)):(t(),a("div",{key:1,class:"message2",innerHTML:n},null,8,V))]))),128))],512)]),_:1},512)]))}});export{C as default};
