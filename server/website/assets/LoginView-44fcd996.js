import{d as p,r as v,b as w,o as m,c,e as a,w as n,u as t,F as f,R as g,O as h,N as u,f as r,g as N,h as k,i as b,j as I,k as S}from"./index-cf00539d.js";const V=p({__name:"LoginView",setup(x){const e=v({host:"http://localhost:8900",username:"",password:""}),d=I();w(()=>{e.value.host=localStorage.getItem("host")||window.location.protocol+"//"+window.location.host});function i(){localStorage.setItem("host",e.value.host),g(),h(e.value.username,e.value.password).then(o=>{o.code==200||o.code==201?(localStorage.setItem("token",o.token),window.$message.success("登录成功"),d.push("/")):window.$message.error("登录失败"+JSON.stringify(o))}).catch(o=>{window.$message.error("登录请求失败"+o),console.log(o)})}return(o,s)=>(m(),c(f,null,[a(t(r),{label:"服务器"},{default:n(()=>[a(t(u),{value:e.value.host,"onUpdate:value":s[0]||(s[0]=l=>e.value.host=l),placeholder:"服务器"},null,8,["value"])]),_:1}),a(t(r),{label:"用户名"},{default:n(()=>[a(t(u),{value:e.value.username,"onUpdate:value":s[1]||(s[1]=l=>e.value.username=l),placeholder:"用户名"},null,8,["value"])]),_:1}),a(t(r),{label:"密码"},{default:n(()=>[a(t(u),{value:e.value.password,"onUpdate:value":s[2]||(s[2]=l=>e.value.password=l),type:"password",onKeydown:s[3]||(s[3]=N(S(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),a(t(b),{onClick:i},{default:n(()=>[k("登录")]),_:1})],64))}});export{V as default};
