
内置 Lua 解释器，包含一个常用工具库和 Obcsapi 一些内部方法

工具库 gopher-lua-libs 包含 http 请求，文件读写，数据库连接等工具
Obcsapi 常用方法

```go
var appExports = map[string]lua.LGFunction{
	"DailyTextAppend":      DailyTextAppend,      // 日志新增文本
	"DailyTextAppendMemos": DailyTextAppendMemos, // 日志新增 memos
	"TextAppend":           TextAppend,           // 指定文件添加文本
	"GetTextObject":        GetTextObject,        // 获取指定文件内容，返回字符串
	"MdTextStore":          MdTextStore,          // 覆盖指定位置文件 纯文本使用
	"TodayGet":             TodayGet,             // 获取今日日记 md 文件字符串 // 每天凌晨 00:00 - 03:59  判断为 today daily 为 昨天的日志
}
```

参数可见源码 server/command/luaLibApp.go 
示例见 script/*.lua

```lua
--- app 为 obcsapi 模块
--- 本示例为 使用 app 调用 obcsapi 的添加到 memos 的示例

local app = require("app") -- 导入 obcsapi 模块
local test = require("test")

print(app_input) -- 从前端传来的参数
-- 带有异常处理的 obcsapi app 调用
print("DailyTextAppend")
local err1 = app.DailyTextAppend(app_input)
if err1 then
    error(err1)
end

print("DailyTextAppendMemos")
local err2 = app.DailyTextAppendMemos(app_input)
if err2 then
    error(err2)
end


-- local err3 = test.ErrorTest()
-- print(err3)
-- if err3 then -- 等于  if err6 ~= nil then
--     error(err3) -- 打印错误信息并终止
-- end

--- 引入自定义 lua 模块写法
local utils = require("script/utils")
local ans = utils.add(2,3)
---

result = "This is a lua result to obcsapi-web , 输入的内容是 "..app_input -- Lua 拼接字符串

return result
```

举例 server/script/form.lua

```lua
--- 用于处理 前端生成的表单 通用处理方法 会添加到日志中
--- @param app_input string 前端输入的内容，是一个字符串，内容是 json
-- @return string Lua 拼接字符串，最终给前端显示

local app = require("app") -- 导入 obcsapi 模块
local utils = require("script/utils") -- 导入自定义函数工具

-- 打印输入的参数
print(app_input)

-- 尝试 JSON 解析 将 json 解析为 table
local json = require("json")
local result, err = json.decode(app_input)
if err then
    error(err)
end


-- 此处可以做一些事情 
-- 比如 取出 json 中的一些字段做判断，执行不同的函数，或者脚本

-- 使用工具库 table_to_string 将 table 转为字符串
table_str = utils.table_to_string(result)
print(table_str)

ret = "后端返回: 前端输入的内容是 "..app_input -- Lua 拼接字符串
ret = ret.."\n解析 JSON 最终转为字符串结果:\n"..table_str
--- 将结果保存到 memos

local err1 = app.DailyTextAppendMemos(table_str)
if err1 then
    error(err1)
end

return ret.."\n并且保存到 memos 中" -- 返回结果，供给前端显示
```


